[defaults]
# WinBatch V2 Self-Contained Plugin Configuration (NO CUSTOM EE REQUIRED!)
inventory = inventory/
host_key_checking = false
timeout = 60
gathering = smart
fact_caching = memory
fact_caching_timeout = 3600

# Connection Plugin Path - WinBatch V2 самодостаточный плагин
connection_plugins = plugins/connection

# Callback plugins для улучшенного логирования
callback_plugins = plugins/callback
stdout_callback = yaml

# Отключаем WinRM, так как используем SSH через WinBatch V2
# ansible_winrm_transport = ntlm
# ansible_winrm_server_cert_validation = ignore

[ssh_connection]
host_key_checking = false
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
control_path_dir = /tmp/.ansible-cp

[winbatch]
# Конфигурация для WinBatch V2 (самодостаточная версия)
batch_size = 20
status_interval = 5
execution_timeout = 3600
ssh_timeout = 60
enable_performance_logging = true
uses_system_tools = true
max_retries = 3
plugin_version = v2.0
custom_ee_required = false

[persistent_connection]
connect_timeout = 60
command_timeout = 300