2025-06-15 06:39:32,302 p=51372 u=kira n=ansible | ansible-playbook [core 2.16.3]
  config file = /home/kira/repos/awxplaybooks/ansible.cfg
  configured module search path = ['/home/kira/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/kira/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-06-15 06:39:32,302 p=51372 u=kira n=ansible | Using /home/kira/repos/awxplaybooks/ansible.cfg as config file
2025-06-15 06:39:32,369 p=51372 u=kira n=ansible | host_list declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:39:32,369 p=51372 u=kira n=ansible | script declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:39:32,369 p=51372 u=kira n=ansible | auto declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:39:32,369 p=51372 u=kira n=ansible | yaml declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:39:32,370 p=51372 u=kira n=ansible | Parsed /home/kira/repos/awxplaybooks/inventory.ini inventory source with ini plugin
2025-06-15 06:39:32,459 p=51372 u=kira n=ansible | redirecting (type: callback) ansible.builtin.yaml to community.general.yaml
2025-06-15 06:39:32,481 p=51372 u=kira n=ansible | redirecting (type: callback) ansible.builtin.yaml to community.general.yaml
2025-06-15 06:39:32,489 p=51372 u=kira n=ansible | Skipping callback 'default', as we already have a stdout callback.
2025-06-15 06:39:32,490 p=51372 u=kira n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2025-06-15 06:39:32,490 p=51372 u=kira n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2025-06-15 06:39:32,490 p=51372 u=kira n=ansible | PLAYBOOK: test_winbatch_v3.yml ***********************************************************************************************************
2025-06-15 06:39:32,490 p=51372 u=kira n=ansible | 1 plays in test_winbatch_v3.yml
2025-06-15 06:39:32,490 p=51372 u=kira n=ansible | PLAY [Test WinBatch V3 Connection Plugin] ************************************************************************************************
2025-06-15 06:39:32,503 p=51372 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:39:32,504 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Output "WinBatch V3 connection test successful"
2025-06-15 06:39:32,504 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:39:32,504 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Output "WinBatch V3 connection test successful"
2025-06-15 06:39:33,614 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:39:33,614 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:39:33,614 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:33,614 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:33,614 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:34,141 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Output "WinBatch V3 connection test successful" } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:39:34,501 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: WinBatch V3 connection test successful
2025-06-15 06:39:34,502 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:39:34,502 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'WinBatch V3 connection test successful'], stderr=[]
2025-06-15 06:39:34,503 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Output "WinBatch V3 connection test successful"', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'WinBatch V3 connection test successful'], 'stderr': [], 'rc': 0}
2025-06-15 06:39:34,503 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
WinBatch V3 connection test successful, stderr=
2025-06-15 06:39:34,503 p=51372 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:39:34,504 p=51372 u=kira n=ansible | TASK [Test basic connectivity] ***********************************************************************************************************
2025-06-15 06:39:34,505 p=51372 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    WinBatch V3 connection test successful
  stdout_lines: <omitted>
2025-06-15 06:39:34,519 p=51372 u=kira n=ansible | TASK [Display connectivity test result] **************************************************************************************************
2025-06-15 06:39:34,520 p=51372 u=kira n=ansible | ok: [win11vm] => 
  connectivity_test.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - WinBatch V3 connection test successful
2025-06-15 06:39:34,528 p=51372 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:39:34,528 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory
ConvertTo-Json -InputObject $info

2025-06-15 06:39:34,528 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:39:34,528 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory
ConvertTo-Json -InputObject $info

2025-06-15 06:39:35,576 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:39:35,576 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:39:35,576 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:35,576 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:35,576 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:36,131 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory; ConvertTo-Json -InputObject $info;  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:39:40,217 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: {
2025-06-15 06:39:40,218 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "WindowsProductName":  "Windows 10 Pro",
2025-06-15 06:39:40,218 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "WindowsVersion":  "2009",
2025-06-15 06:39:40,218 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "TotalPhysicalMemory":  null
2025-06-15 06:39:40,218 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: }
2025-06-15 06:39:40,222 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:39:40,222 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', '{', '"WindowsProductName":  "Windows 10 Pro",', '"WindowsVersion":  "2009",', '"TotalPhysicalMemory":  null', '}'], stderr=[]
2025-06-15 06:39:40,222 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': '$info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory\nConvertTo-Json -InputObject $info\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', '{', '"WindowsProductName":  "Windows 10 Pro",', '"WindowsVersion":  "2009",', '"TotalPhysicalMemory":  null', '}'], 'stderr': [], 'rc': 0}
2025-06-15 06:39:40,222 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
{
"WindowsProductName":  "Windows 10 Pro",
"WindowsVersion":  "2009",
"TotalPhysicalMemory":  null
}, stderr=
2025-06-15 06:39:40,223 p=51372 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:39:40,225 p=51372 u=kira n=ansible | TASK [Get system information] ************************************************************************************************************
2025-06-15 06:39:40,225 p=51372 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    {
    "WindowsProductName":  "Windows 10 Pro",
    "WindowsVersion":  "2009",
    "TotalPhysicalMemory":  null
    }
  stdout_lines: <omitted>
2025-06-15 06:39:40,238 p=51372 u=kira n=ansible | TASK [Display system information] ********************************************************************************************************
2025-06-15 06:39:40,239 p=51372 u=kira n=ansible | ok: [win11vm] => 
  system_info.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - '{'
  - '"WindowsProductName":  "Windows 10 Pro",'
  - '"WindowsVersion":  "2009",'
  - '"TotalPhysicalMemory":  null'
  - '}'
2025-06-15 06:39:40,247 p=51372 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:39:40,247 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Output "Command 1"
Start-Sleep -Seconds 1
Write-Output "Command 2"
Start-Sleep -Seconds 1
Write-Output "Command 3"

2025-06-15 06:39:40,248 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:39:40,248 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Output "Command 1"
Start-Sleep -Seconds 1
Write-Output "Command 2"
Start-Sleep -Seconds 1
Write-Output "Command 3"

2025-06-15 06:39:41,244 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:39:41,244 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:39:41,244 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:41,244 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:41,244 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:41,774 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Output "Command 1"; Start-Sleep -Seconds 1; Write-Output "Command 2"; Start-Sleep -Seconds 1; Write-Output "Command 3";  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:39:42,129 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 1
2025-06-15 06:39:43,138 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 2
2025-06-15 06:39:44,144 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 3
2025-06-15 06:39:44,148 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:39:44,148 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Command 1', 'Command 2', 'Command 3'], stderr=[]
2025-06-15 06:39:44,148 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Output "Command 1"\nStart-Sleep -Seconds 1\nWrite-Output "Command 2"\nStart-Sleep -Seconds 1\nWrite-Output "Command 3"\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Command 1', 'Command 2', 'Command 3'], 'stderr': [], 'rc': 0}
2025-06-15 06:39:44,148 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
Command 1
Command 2
Command 3, stderr=
2025-06-15 06:39:44,149 p=51372 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:39:44,150 p=51372 u=kira n=ansible | TASK [Test multiple commands in sequence] ************************************************************************************************
2025-06-15 06:39:44,151 p=51372 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    Command 1
    Command 2
    Command 3
  stdout_lines: <omitted>
2025-06-15 06:39:44,165 p=51372 u=kira n=ansible | TASK [Display sequence test results] *****************************************************************************************************
2025-06-15 06:39:44,166 p=51372 u=kira n=ansible | ok: [win11vm] => 
  sequence_test.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - Command 1
  - Command 2
  - Command 3
2025-06-15 06:39:44,174 p=51372 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:39:44,174 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: $testPath = "C:\temp\winbatch_v3_test"
New-Item -Path $testPath -ItemType Directory -Force
Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"
Get-Content "$testPath\test.txt"
Remove-Item -Path $testPath -Recurse -Force

2025-06-15 06:39:44,174 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:39:44,174 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: $testPath = "C:\temp\winbatch_v3_test"
New-Item -Path $testPath -ItemType Directory -Force
Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"
Get-Content "$testPath\test.txt"
Remove-Item -Path $testPath -Recurse -Force

2025-06-15 06:39:45,173 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:39:45,173 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:39:45,173 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:45,173 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:45,173 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:45,702 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { $testPath = "C:\temp\winbatch_v3_test"; New-Item -Path $testPath -ItemType Directory -Force; Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"; Get-Content "$testPath\test.txt"; Remove-Item -Path $testPath -Recurse -Force;  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:39:46,147 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:46,151 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:46,159 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Directory: C:\temp
2025-06-15 06:39:46,159 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:46,159 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:46,165 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Mode                 LastWriteTime         Length Name
2025-06-15 06:39:46,166 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ----                 -------------         ------ ----
2025-06-15 06:39:46,168 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: d-----         6/15/2025   6:39 AM                winbatch_v3_test
2025-06-15 06:39:46,209 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: WinBatch V3 test file content
2025-06-15 06:39:46,316 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:39:46,316 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Directory: C:\\temp', 'Mode                 LastWriteTime         Length Name', '----                 -------------         ------ ----', 'd-----         6/15/2025   6:39 AM                winbatch_v3_test', 'WinBatch V3 test file content'], stderr=[]
2025-06-15 06:39:46,317 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': '$testPath = "C:\\temp\\winbatch_v3_test"\nNew-Item -Path $testPath -ItemType Directory -Force\nSet-Content -Path "$testPath\\test.txt" -Value "WinBatch V3 test file content"\nGet-Content "$testPath\\test.txt"\nRemove-Item -Path $testPath -Recurse -Force\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Directory: C:\\temp', 'Mode                 LastWriteTime         Length Name', '----                 -------------         ------ ----', 'd-----         6/15/2025   6:39 AM                winbatch_v3_test', 'WinBatch V3 test file content'], 'stderr': [], 'rc': 0}
2025-06-15 06:39:46,317 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
Directory: C:\temp
Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----         6/15/2025   6:39 AM                winbatch_v3_test
WinBatch V3 test file content, stderr=
2025-06-15 06:39:46,317 p=51372 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:39:46,318 p=51372 u=kira n=ansible | TASK [Test file operations] **************************************************************************************************************
2025-06-15 06:39:46,319 p=51372 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    Directory: C:\temp
    Mode                 LastWriteTime         Length Name
    ----                 -------------         ------ ----
    d-----         6/15/2025   6:39 AM                winbatch_v3_test
    WinBatch V3 test file content
  stdout_lines: <omitted>
2025-06-15 06:39:46,333 p=51372 u=kira n=ansible | TASK [Display file operations result] ****************************************************************************************************
2025-06-15 06:39:46,333 p=51372 u=kira n=ansible | ok: [win11vm] => 
  file_ops.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - 'Directory: C:\temp'
  - Mode                 LastWriteTime         Length Name
  - '----                 -------------         ------ ----'
  - d-----         6/15/2025   6:39 AM                winbatch_v3_test
  - WinBatch V3 test file content
2025-06-15 06:39:46,342 p=51372 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:39:46,342 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Error "This is a test error"
exit 1

2025-06-15 06:39:46,342 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:39:46,342 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Error "This is a test error"
exit 1

2025-06-15 06:39:47,452 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:39:47,452 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:39:47,452 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:47,452 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:47,452 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:39:47,980 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Error "This is a test error"; exit 1;  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:39:48,505 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT EOF
2025-06-15 06:39:48,505 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows'], stderr=[]
2025-06-15 06:39:48,505 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Error "This is a test error"\nexit 1\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows'], 'stderr': [], 'rc': 0}
2025-06-15 06:39:48,505 p=51372 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows, stderr=
2025-06-15 06:39:48,506 p=51372 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:39:48,506 p=51372 u=kira n=ansible | TASK [Test error handling] ***************************************************************************************************************
2025-06-15 06:39:48,507 p=51372 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  stdout_lines: <omitted>
2025-06-15 06:39:48,520 p=51372 u=kira n=ansible | TASK [Display error test result] *********************************************************************************************************
2025-06-15 06:39:48,521 p=51372 u=kira n=ansible | ok: [win11vm] => 
  error_test:
    changed: true
    failed: false
    rc: 0
    stderr: ''
    stderr_lines: []
    stdout: |-
      Windows PowerShell
      Copyright (C) Microsoft Corporation. All rights reserved.
      Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    stdout_lines:
    - Windows PowerShell
    - Copyright (C) Microsoft Corporation. All rights reserved.
    - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:39:48,523 p=51372 u=kira n=ansible | PLAY RECAP *******************************************************************************************************************************
2025-06-15 06:39:48,523 p=51372 u=kira n=ansible | win11vm                    : ok=10   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-06-15 06:42:01,684 p=51662 u=kira n=ansible | ansible-playbook [core 2.16.3]
  config file = /home/kira/repos/awxplaybooks/ansible.cfg
  configured module search path = ['/home/kira/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/kira/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-06-15 06:42:01,684 p=51662 u=kira n=ansible | Using /home/kira/repos/awxplaybooks/ansible.cfg as config file
2025-06-15 06:42:01,754 p=51662 u=kira n=ansible | host_list declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:42:01,754 p=51662 u=kira n=ansible | script declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:42:01,754 p=51662 u=kira n=ansible | auto declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:42:01,754 p=51662 u=kira n=ansible | yaml declined parsing /home/kira/repos/awxplaybooks/inventory.ini as it did not pass its verify_file() method
2025-06-15 06:42:01,755 p=51662 u=kira n=ansible | Parsed /home/kira/repos/awxplaybooks/inventory.ini inventory source with ini plugin
2025-06-15 06:42:01,840 p=51662 u=kira n=ansible | redirecting (type: callback) ansible.builtin.yaml to community.general.yaml
2025-06-15 06:42:01,863 p=51662 u=kira n=ansible | redirecting (type: callback) ansible.builtin.yaml to community.general.yaml
2025-06-15 06:42:01,872 p=51662 u=kira n=ansible | Skipping callback 'default', as we already have a stdout callback.
2025-06-15 06:42:01,872 p=51662 u=kira n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2025-06-15 06:42:01,872 p=51662 u=kira n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2025-06-15 06:42:01,872 p=51662 u=kira n=ansible | PLAYBOOK: test_winbatch_v3.yml ***********************************************************************************************************
2025-06-15 06:42:01,872 p=51662 u=kira n=ansible | 1 plays in test_winbatch_v3.yml
2025-06-15 06:42:01,873 p=51662 u=kira n=ansible | PLAY [Test WinBatch V3 Connection Plugin] ************************************************************************************************
2025-06-15 06:42:01,887 p=51662 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:42:01,887 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Output "WinBatch V3 connection test successful"
2025-06-15 06:42:01,887 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:42:01,887 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Output "WinBatch V3 connection test successful"
2025-06-15 06:42:02,954 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:42:02,954 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:42:02,954 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:02,954 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:02,954 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:03,472 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Output "WinBatch V3 connection test successful" } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:42:03,837 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: WinBatch V3 connection test successful
2025-06-15 06:42:03,839 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:42:03,839 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'WinBatch V3 connection test successful'], stderr=[]
2025-06-15 06:42:03,839 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Output "WinBatch V3 connection test successful"', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'WinBatch V3 connection test successful'], 'stderr': [], 'rc': 0}
2025-06-15 06:42:03,839 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
WinBatch V3 connection test successful, stderr=
2025-06-15 06:42:03,840 p=51662 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:42:03,841 p=51662 u=kira n=ansible | TASK [Test basic connectivity] ***********************************************************************************************************
2025-06-15 06:42:03,842 p=51662 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    WinBatch V3 connection test successful
  stdout_lines: <omitted>
2025-06-15 06:42:03,855 p=51662 u=kira n=ansible | TASK [Display connectivity test result] **************************************************************************************************
2025-06-15 06:42:03,856 p=51662 u=kira n=ansible | ok: [win11vm] => 
  connectivity_test.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - WinBatch V3 connection test successful
2025-06-15 06:42:03,865 p=51662 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:42:03,865 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory
ConvertTo-Json -InputObject $info

2025-06-15 06:42:03,865 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:42:03,865 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory
ConvertTo-Json -InputObject $info

2025-06-15 06:42:04,904 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:42:04,904 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:42:04,904 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:04,904 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:04,904 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:05,434 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { $info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory; ConvertTo-Json -InputObject $info;  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:42:09,599 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: {
2025-06-15 06:42:09,599 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "WindowsProductName":  "Windows 10 Pro",
2025-06-15 06:42:09,599 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "WindowsVersion":  "2009",
2025-06-15 06:42:09,599 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: "TotalPhysicalMemory":  null
2025-06-15 06:42:09,599 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: }
2025-06-15 06:42:09,605 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:42:09,605 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', '{', '"WindowsProductName":  "Windows 10 Pro",', '"WindowsVersion":  "2009",', '"TotalPhysicalMemory":  null', '}'], stderr=[]
2025-06-15 06:42:09,605 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': '$info = Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, TotalPhysicalMemory\nConvertTo-Json -InputObject $info\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', '{', '"WindowsProductName":  "Windows 10 Pro",', '"WindowsVersion":  "2009",', '"TotalPhysicalMemory":  null', '}'], 'stderr': [], 'rc': 0}
2025-06-15 06:42:09,605 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
{
"WindowsProductName":  "Windows 10 Pro",
"WindowsVersion":  "2009",
"TotalPhysicalMemory":  null
}, stderr=
2025-06-15 06:42:09,606 p=51662 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:42:09,607 p=51662 u=kira n=ansible | TASK [Get system information] ************************************************************************************************************
2025-06-15 06:42:09,608 p=51662 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    {
    "WindowsProductName":  "Windows 10 Pro",
    "WindowsVersion":  "2009",
    "TotalPhysicalMemory":  null
    }
  stdout_lines: <omitted>
2025-06-15 06:42:09,621 p=51662 u=kira n=ansible | TASK [Display system information] ********************************************************************************************************
2025-06-15 06:42:09,621 p=51662 u=kira n=ansible | ok: [win11vm] => 
  system_info.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - '{'
  - '"WindowsProductName":  "Windows 10 Pro",'
  - '"WindowsVersion":  "2009",'
  - '"TotalPhysicalMemory":  null'
  - '}'
2025-06-15 06:42:09,630 p=51662 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:42:09,630 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Output "Command 1"
Start-Sleep -Seconds 1
Write-Output "Command 2"
Start-Sleep -Seconds 1
Write-Output "Command 3"

2025-06-15 06:42:09,630 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:42:09,630 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Output "Command 1"
Start-Sleep -Seconds 1
Write-Output "Command 2"
Start-Sleep -Seconds 1
Write-Output "Command 3"

2025-06-15 06:42:10,649 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:42:10,649 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:42:10,650 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:10,650 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:10,650 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:11,161 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Output "Command 1"; Start-Sleep -Seconds 1; Write-Output "Command 2"; Start-Sleep -Seconds 1; Write-Output "Command 3";  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:42:11,515 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 1
2025-06-15 06:42:12,527 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 2
2025-06-15 06:42:13,531 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Command 3
2025-06-15 06:42:13,535 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:42:13,536 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Command 1', 'Command 2', 'Command 3'], stderr=[]
2025-06-15 06:42:13,536 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Output "Command 1"\nStart-Sleep -Seconds 1\nWrite-Output "Command 2"\nStart-Sleep -Seconds 1\nWrite-Output "Command 3"\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Command 1', 'Command 2', 'Command 3'], 'stderr': [], 'rc': 0}
2025-06-15 06:42:13,536 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
Command 1
Command 2
Command 3, stderr=
2025-06-15 06:42:13,538 p=51662 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:42:13,541 p=51662 u=kira n=ansible | TASK [Test multiple commands in sequence] ************************************************************************************************
2025-06-15 06:42:13,543 p=51662 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    Command 1
    Command 2
    Command 3
  stdout_lines: <omitted>
2025-06-15 06:42:13,574 p=51662 u=kira n=ansible | TASK [Display sequence test results] *****************************************************************************************************
2025-06-15 06:42:13,575 p=51662 u=kira n=ansible | ok: [win11vm] => 
  sequence_test.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - Command 1
  - Command 2
  - Command 3
2025-06-15 06:42:13,584 p=51662 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:42:13,584 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: $testPath = "C:\temp\winbatch_v3_test"
New-Item -Path $testPath -ItemType Directory -Force
Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"
Get-Content "$testPath\test.txt"

2025-06-15 06:42:13,584 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:42:13,584 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: $testPath = "C:\temp\winbatch_v3_test"
New-Item -Path $testPath -ItemType Directory -Force
Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"
Get-Content "$testPath\test.txt"

2025-06-15 06:42:14,625 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:42:14,625 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:42:14,625 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:14,625 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:14,625 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:15,148 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { $testPath = "C:\temp\winbatch_v3_test"; New-Item -Path $testPath -ItemType Directory -Force; Set-Content -Path "$testPath\test.txt" -Value "WinBatch V3 test file content"; Get-Content "$testPath\test.txt";  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:42:15,572 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:15,577 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:15,585 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Directory: C:\temp
2025-06-15 06:42:15,586 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:15,586 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:15,592 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Mode                 LastWriteTime         Length Name
2025-06-15 06:42:15,592 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ----                 -------------         ------ ----
2025-06-15 06:42:15,594 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: d-----         6/15/2025   6:42 AM                winbatch_v3_test
2025-06-15 06:42:15,632 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: WinBatch V3 test file content
2025-06-15 06:42:15,720 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: ---WINBATCH_V3_COMMAND_DONE---:0
2025-06-15 06:42:15,720 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Directory: C:\\temp', 'Mode                 LastWriteTime         Length Name', '----                 -------------         ------ ----', 'd-----         6/15/2025   6:42 AM                winbatch_v3_test', 'WinBatch V3 test file content'], stderr=[]
2025-06-15 06:42:15,720 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': '$testPath = "C:\\temp\\winbatch_v3_test"\nNew-Item -Path $testPath -ItemType Directory -Force\nSet-Content -Path "$testPath\\test.txt" -Value "WinBatch V3 test file content"\nGet-Content "$testPath\\test.txt"\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows', 'Directory: C:\\temp', 'Mode                 LastWriteTime         Length Name', '----                 -------------         ------ ----', 'd-----         6/15/2025   6:42 AM                winbatch_v3_test', 'WinBatch V3 test file content'], 'stderr': [], 'rc': 0}
2025-06-15 06:42:15,720 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
Directory: C:\temp
Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----         6/15/2025   6:42 AM                winbatch_v3_test
WinBatch V3 test file content, stderr=
2025-06-15 06:42:15,721 p=51662 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:42:15,721 p=51662 u=kira n=ansible | TASK [Test file operations] **************************************************************************************************************
2025-06-15 06:42:15,722 p=51662 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    Directory: C:\temp
    Mode                 LastWriteTime         Length Name
    ----                 -------------         ------ ----
    d-----         6/15/2025   6:42 AM                winbatch_v3_test
    WinBatch V3 test file content
  stdout_lines: <omitted>
2025-06-15 06:42:15,736 p=51662 u=kira n=ansible | TASK [Display file operations result] ****************************************************************************************************
2025-06-15 06:42:15,736 p=51662 u=kira n=ansible | ok: [win11vm] => 
  file_ops.stdout_lines:
  - Windows PowerShell
  - Copyright (C) Microsoft Corporation. All rights reserved.
  - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  - 'Directory: C:\temp'
  - Mode                 LastWriteTime         Length Name
  - '----                 -------------         ------ ----'
  - d-----         6/15/2025   6:42 AM                winbatch_v3_test
  - WinBatch V3 test file content
2025-06-15 06:42:15,745 p=51662 u=kira n=ansible | <win11vm> SSH connection established successfully
2025-06-15 06:42:15,745 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command: Write-Error "This is a test error"
exit 1

2025-06-15 06:42:15,745 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] waiting for result with timeout 30
2025-06-15 06:42:15,745 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] EXEC: Write-Error "This is a test error"
exit 1

2025-06-15 06:42:16,766 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Windows PowerShell
2025-06-15 06:42:16,766 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Copyright (C) Microsoft Corporation. All rights reserved.
2025-06-15 06:42:16,766 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:16,766 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:16,766 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: 
2025-06-15 06:42:17,278 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT: PS C:\Users\localadmin> $exitCode = 0; try { Write-Error "This is a test error"; exit 1;  } catch { Write-Error $_.Exception.Message; $exitCode = 1 }; Write-Output "---WINBATCH_V3_COMMAND_DONE---:$exitCode"
2025-06-15 06:42:17,805 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] STDOUT EOF
2025-06-15 06:42:17,805 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] RESULT: rc=0, stdout=['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows'], stderr=[]
2025-06-15 06:42:17,805 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] got result: {'command': 'Write-Error "This is a test error"\nexit 1\n', 'stdout': ['Windows PowerShell', 'Copyright (C) Microsoft Corporation. All rights reserved.', 'Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows'], 'stderr': [], 'rc': 0}
2025-06-15 06:42:17,805 p=51662 u=kira n=ansible | <win11vm> [winbatch_v3] exec_command result: rc=0, stdout=Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.
Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows, stderr=
2025-06-15 06:42:17,806 p=51662 u=kira n=ansible | <win11vm> SSH connection closed
2025-06-15 06:42:17,807 p=51662 u=kira n=ansible | TASK [Test error handling] ***************************************************************************************************************
2025-06-15 06:42:17,807 p=51662 u=kira n=ansible | changed: [win11vm] => changed=true 
  rc: 0
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    Windows PowerShell
    Copyright (C) Microsoft Corporation. All rights reserved.
    Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
  stdout_lines: <omitted>
2025-06-15 06:42:17,821 p=51662 u=kira n=ansible | TASK [Display error test result] *********************************************************************************************************
2025-06-15 06:42:17,821 p=51662 u=kira n=ansible | ok: [win11vm] => 
  error_test:
    changed: true
    failed: false
    rc: 0
    stderr: ''
    stderr_lines: []
    stdout: |-
      Windows PowerShell
      Copyright (C) Microsoft Corporation. All rights reserved.
      Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
    stdout_lines:
    - Windows PowerShell
    - Copyright (C) Microsoft Corporation. All rights reserved.
    - Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows
2025-06-15 06:42:17,823 p=51662 u=kira n=ansible | PLAY RECAP *******************************************************************************************************************************
2025-06-15 06:42:17,824 p=51662 u=kira n=ansible | win11vm                    : ok=10   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
